<!DOCTYPE html>
<html>

<head>
  <meta charset="utf-8">
  <meta name="viewport" content="width=device-width, initial-scale=1.0">
  <title>replit</title>
  <link href="style.css" rel="stylesheet" type="text/css" />
  <script src="https://cdnjs.cloudflare.com/ajax/libs/p5.js/1.4.0/p5.min.js">

  </script>
  <script src="https://cdnjs.cloudflare.com/ajax/libs/tone/14.8.32/Tone.js">

  </script>
</head>

<body>
  <button id="about" class='menu'>About "In C"</button>
  <div id="aboutInC" style="display: none;">
    <h2>About "In C"</h2>
    <image src="frame.png" width=25% align="left" style="margin: 20px;" alt="https://InC-with-Tonejs.dbwetzel.repl.co">
    </image>
    <p>"In C" (1964), by Terry Riley, is meant for any number of musicians and for any instrumentation. It is a series
      of 53 short musical phrases to be played by the entire ensemble in order, but asynchronously. An ostinato pulse is
      usually given by one instrument to keep time (typically a piano, playing the note 'C' in multiple octaves).
    </p>
    <p>
      At the start, players begin with phrase number 1, repeating, looping, or laying out and listening, <i>ad lib.</i>
      Players move on to the next phrase (in order) when they feel that the moment is right. Players should stay within
      3 or 4 phrases of the rest of the group. This process continues until the ensemble has played through all 53
      phrases.
    </p>
    <p>A complete performance of 'In C' takes anywhere from 45 minutes to an hour and a half.</p>
    <button id="howTo" class="menu">How to Play "In C"</button>
    <div id="InC-howTo" style="display: none;">
      <p>
        This is a "play-along" version of Terry Rileys "In C" (1964) designed for inclusion. If you have a device that can play sound through a web browser, you can participate, regardless of musical background or ability.
      </p>
      <p>
        To get started, open the "Metronome" tab (below) and tap on "Start Transport." Someone in the group should designate their device as the "conductor" and tap "Play Metronome Pulse." You should hear a steady pulse on the note 'C' (in multiple octaves).
      </p>
      <p>When another "player" member of the group starts their Transport and Metronome, you might hear that the pulse is out of sync with the "conductor" pulse. To synchronize the metronomes between a player and the conductor, the player should tap on the "Synchronize Metronomes" button (it should turn orange). This will cause the player's metronome to run 5% faster. 
      </p> 
      <p>Listen carefully for when the player's metronome catches up with the conductor's metronome. At that point, the two metronomes should be in sync. Tap the sync button one more time to return to the standard tempo (138 bpm).  
      </p>
      <p>Leave the "Transport" running so you can play the rest of the piece. You may turn off the Metronome pulse if you like (recommended except for the "conductor"). Close the metronome tab.
      </p>
      <p>At the beginning of a performance (reading, realization, ...) of In C, all players begin by playing phrase #1. To play, simply tap on the music notation image for a given excerpt. To play it an octave higher, tap the "8va" button. To play an octave lower, tap the "8vb" button. To loop an excerpt, tap the "loop" icon below the octave buttons. Tap it again to stop looping that excerpt.
      </p>
      <p>Everyone begins on phrase #1, playing single passes, or looping (or laying out) as the spirit moves them. When you feel it's right, move on to phrase 2. Listen for the others, and don't get too far ahead. </p>
      <p>One of the rules of "In C" is that all members of the group should stay within 3-4 phrases of each other. See if you can create a "dialog" with someone near you by trading phrases back and forth (maybe in different octaves). Don't forget to turn off loops for phrases you have left behind. Gradually move your way through all 53 phrases with the group, but make your own decisions about whether to play or not, loop or not, raise or lower the octave, and preceisely when to move on the the next phrase.
      </p>
      <p>Nothing is stopping you from moving backwards, but the idea is to move forwards only, and to concentrate on one phrase at a time per player (even though this app allows you to run multiple simultaneous loops). The piece is done when all players have made it to the end, and everyone drops out one by one. Look for a cue from the "conductor" to know when it's really finished. Then give each other a high-five!</p>
    </div>
  
    <button id="credits" class='menu'>CREDITS</button>
    <div id="InC-credits" style="display: none;">
      <p>"IN C with Tone.js" code by David B. Wetzel</p>
      <p>Original concept by Griffin Moe</p>
      <p>"In C" v 1.0 prototype in Max (2016) by David B. Wetzel, Griffin Moe, and the students of COMP 122 in fall 2016</p>
      <p>Thanks also to George Thiruvathukal for advice, testing, participation in early trials, and general moral and institutional support for this project</p>
      <p>"In C" sequences prepared by students from COMP/MUSC 122, Spring 2022, Loyola University Chicago</p>
      <ul>
        <li>Atherly-Larsen, Maya
        <li>Bauer, Emily
        <li>Carranza, Alexis
        <li>Chin, Erin
        <li>Chmielewski, Charlie
        <li>Cummings, Jacob
        <li>Denyes, Alyssa
        <li>Fellerhoff, William
        <li>Gaub, Nathanael
        <li>Januario, Nicolas
        <li>Kazor, Josephine
        <li>Kolli, Sara
        <li>Kopetz, Alex
        <li>Lopezmalo, Andrea
        <li>Mattiello, Dominic
        <li>McElligott, Shawn
        <li>Newcorn, Anna
        <li>Pace, Zariana
        <li>Rojas, Dani
        <li>Schroeder, Madalyn
        <li>Sirisomsack, Preston
        <li>Snyder, Harrison
        <li>Sorbjan, Natalia
        <li>Stevens, Will
        <li>Stuart, Peter
        <li>Tomes, Riley
        <li>Trachtova, Aja
        <li>Wang, Ethan
      </ul>
    </div>
  </div>
  <div class="utilities">
    <button id="metronome" class='menu'>Metronome</button>
    <div id="metro" style="display: none; background-color: #EEEEEE;" class="metro">
      <button name="tone" class='metro-button' style="display: none;">Start Audio</button>
      <button name="transport" id="transport" class='metro-button'>Start Transport</button>
      <button name="pulse" id="pulse" class='metro-button'>Play Metronome Pulse</button>
      <button name="syncButton" id="syncButton" class="metro-button" style="width: 40%;">Synchronize Metronomes</button>    
      <button name="tapSync" id="tapSync" class="metro-button" style="width: 40%;">Tap to Sync</button> <br>    
        <label style="text-align: center;"> Tempo:
        <input type="text" id="tempo-box" name="tempo-box" required minlength="5" maxlength="6" size="10">
      </label>
    </div>
    <button id="sounds" class='menu'>Sounds</button>
    <div id="sound-controls" style="display: none; background-color: #EEEEEE;">
      <label class="form-control" for="sound-select">Choose a sound: (coming soon ...)</label>

      <select class=dropdown name="sounds" id="sound-select">
        <option value="default">Default</option>
        <option value="square_lead">Square Lead</option>
        <option value="AM_Synth">AM Synth</option>
        <option value="FM_Synth">FM Synth</option>
        <option value="Noisy">Noisy</option>
        <option value="Piano">Piano</option>
      </select>
    </div>
    <button id="unloop" class='menu' onmousedown="this.style.background = '#ff0000'" onmouseup="this.style.background = '#4caf50'" onmouseleave="this.style.background = '#4caf50'"
      >
      All Loops Off
    </button>

  </div>
  <div id="testLoop" class="loopDiv" style="display: none;">
    <form>
      <label for="checkbox2" class="loopLabel">
        <input type="checkbox" id="checkbox2" class="loopInput">
        <span class=loopSpan id="svgTemplate">
          <svg xmlns="http://www.w3.org/2000/svg" class="loopsvg" fill=none viewBox="0 0 24 24" stroke-width="2"
            stroke="currentColor">
            <path d="M8.81,2.05l1.55,1.21L8.81,4.33V2.05z M9.9,3.27H3c-1.1,0-2,0.9-2,2v4.8c0,1.1,0.9,2,2,2h13.81c1.1,0,2-0.9,2-2
	v-4.8c0-1.1-0.9-2-2-2h-3.72" />
          </svg>
        </span>
      </label>
    </form>
  </div>

  <div id="phrases">
    <table id="phraseTable">
    </table>
  </div>

  <script src="script.js"></script>
  <script src="voices.js"></script>
  <script src="InCphrases.js"></script>


</body>

</html>